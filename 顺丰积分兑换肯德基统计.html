<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>可兑换肯德基礼品卡账号统计</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#E63946',
                        secondary: '#457B9D',
                        accent: '#F1FAEE',
                        dark: '#1D3557',
                        light: '#F1FAEE'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-shadow {
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            }
            .hover-lift {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .hover-lift:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <header class="bg-gradient-to-r from-primary to-secondary text-white shadow-md">
        <div class="container mx-auto px-4 py-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <i class="fa fa-cutlery text-3xl mr-3"></i>
                    <h1 class="text-2xl md:text-3xl font-bold">肯德基礼品卡兑换统计</h1>
                </div>
                <div class="flex items-center">
                    <span class="bg-white/20 px-3 py-1 rounded-full text-sm mr-2">
                        <i class="fa fa-ticket mr-1"></i>兑换规则: 1200积分/张
                    </span>
                    <button id="refreshBtn" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-all">
                        <i class="fa fa-refresh mr-1"></i>刷新
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="mb-8 bg-white rounded-xl p-6 shadow-md">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div>
                    <h2 class="text-xl font-semibold text-dark mb-2">可兑换账号统计</h2>
                    <p class="text-gray-500">共 <span id="totalAccounts" class="text-primary font-bold">18</span> 个账号可兑换，总计可兑换 <span id="totalCards" class="text-primary font-bold">27</span> 张礼品卡</p>
                </div>
                <div class="mt-4 md:mt-0">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="搜索手机号..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50">
                        <i class="fa fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-4 bg-secondary/10 border-b border-gray-100">
                    <h3 class="font-semibold text-dark flex items-center">
                        <i class="fa fa-bar-chart text-secondary mr-2"></i>兑换数量分布
                    </h3>
                </div>
                <div class="p-6">
                    <canvas id="redeemChart" height="250"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-4 bg-secondary/10 border-b border-gray-100">
                    <h3 class="font-semibold text-dark flex items-center">
                        <i class="fa fa-pie-chart text-secondary mr-2"></i>积分区间分布
                    </h3>
                </div>
                <div class="p-6">
                    <canvas id="pointsChart" height="250"></canvas>
                </div>
            </div>
        </div>

        <div class="mt-8 bg-white rounded-xl shadow-md overflow-hidden">
            <div class="p-4 bg-secondary/10 border-b border-gray-100 flex justify-between items-center">
                <h3 class="font-semibold text-dark flex items-center">
                    <i class="fa fa-list-alt text-secondary mr-2"></i>可兑换账号列表
                </h3>
                <div class="text-sm text-gray-500">
                    <span>排序:</span>
                    <select id="sortSelect" class="ml-2 border border-gray-200 rounded px-2 py-1 focus:outline-none">
                        <option value="cards-desc">兑换张数(降序)</option>
                        <option value="cards-asc">兑换张数(升序)</option>
                        <option value="points-desc">积分(降序)</option>
                        <option value="points-asc">积分(升序)</option>
                    </select>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                账号手机号
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                当前积分
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                可兑换张数
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                剩余积分
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                状态
                            </th>
                        </tr>
                    </thead>
                    <tbody id="accountTableBody" class="bg-white divide-y divide-gray-200">
                        <!-- 账号数据将通过JavaScript动态填充 -->
                    </tbody>
                </table>
            </div>
            <div class="p-4 border-t border-gray-200">
                <div class="flex justify-between items-center">
                    <div class="text-sm text-gray-500">显示 <span id="showingCount">18</span> 个账号</div>
                    <div class="flex space-x-2">
                        <button id="prevPage" class="px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fa fa-chevron-left"></i> 上一页
                        </button>
                        <button id="nextPage" class="px-3 py-1 border border-gray-300 rounded bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            下一页 <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-white mt-12 py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-sm">© 2025 积分兑换系统. 保留所有权利.</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-300 hover:text-white transition-colors"><i class="fa fa-question-circle"></i> 帮助中心</a>
                    <a href="#" class="text-gray-300 hover:text-white transition-colors"><i class="fa fa-info-circle"></i> 关于我们</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <script>
        // 账号数据
        const accountData = [
            { phone: "187****2228", points: 3609, cards: 3, remaining: 9, status: "正常" },
            { phone: "191****2565", points: 1337, cards: 1, remaining: 137, status: "正常" },
            { phone: "158****6523", points: 3165, cards: 2, remaining: 765, status: "正常" },
            { phone: "158****9444", points: 2858, cards: 2, remaining: 458, status: "正常" },
            { phone: "151****5384", points: 1675, cards: 1, remaining: 475, status: "正常" },
            { phone: "131****2737", points: 2862, cards: 2, remaining: 462, status: "正常（重复账号）" },
            { phone: "159****0057", points: 2605, cards: 2, remaining: 205, status: "正常" },
            { phone: "187****1322", points: 1676, cards: 1, remaining: 476, status: "正常" },
            { phone: "187****6152", points: 2133, cards: 1, remaining: 933, status: "正常" },
            { phone: "177****6952", points: 1746, cards: 1, remaining: 546, status: "需养号解禁" },
            { phone: "158****7763", points: 1207, cards: 1, remaining: 7, status: "正常" },
            { phone: "135****6464", points: 1878, cards: 1, remaining: 678, status: "正常" },
            { phone: "177****9937", points: 1864, cards: 1, remaining: 664, status: "正常" },
            { phone: "159****5095", points: 1850, cards: 1, remaining: 650, status: "正常" },
            { phone: "189****1121", points: 1703, cards: 1, remaining: 503, status: "正常" },
            { phone: "175****5815", points: 1705, cards: 1, remaining: 505, status: "正常" },
            { phone: "132****8186", points: 1447, cards: 1, remaining: 247, status: "正常" },
            { phone: "153****4764", points: 1244, cards: 1, remaining: 44, status: "正常" },
            { phone: "153****4861", points: 1386, cards: 1, remaining: 186, status: "正常" }
        ];

        // 当前页码和分页配置
        let currentPage = 1;
        const pageSize = 10;
        let filteredData = [...accountData];

        // DOM元素
        const accountTableBody = document.getElementById('accountTableBody');
        const searchInput = document.getElementById('searchInput');
        const sortSelect = document.getElementById('sortSelect');
        const prevPageBtn = document.getElementById('prevPage');
        const nextPageBtn = document.getElementById('nextPage');
        const showingCountEl = document.getElementById('showingCount');
        const totalAccountsEl = document.getElementById('totalAccounts');
        const totalCardsEl = document.getElementById('totalCards');
        const refreshBtn = document.getElementById('refreshBtn');

        // 初始化页面
        function init() {
            renderTable();
            initCharts();
            setupEventListeners();
            updateTotalStats();
        }

        // 渲染表格数据
        function renderTable() {
            // 计算分页
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const paginatedData = filteredData.slice(startIndex, endIndex);
            
            // 清空表格
            accountTableBody.innerHTML = '';
            
            // 添加数据行
            paginatedData.forEach(account => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50 transition-colors';
                
                // 状态标签样式
                let statusClass = 'bg-green-100 text-green-800';
                if (account.status.includes('需养号')) {
                    statusClass = 'bg-yellow-100 text-yellow-800';
                } else if (account.status.includes('重复')) {
                    statusClass = 'bg-blue-100 text-blue-800';
                }
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${account.phone}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${account.points}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-primary/10 text-primary">
                            ${account.cards} 张
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-500">${account.remaining}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusClass}">
                            ${account.status}
                        </span>
                    </td>
                `;
                
                accountTableBody.appendChild(row);
            });
            
            // 更新分页按钮状态
            updatePagination();
            // 更新显示数量
            showingCountEl.textContent = filteredData.length;
        }

        // 更新分页按钮状态
        function updatePagination() {
            const totalPages = Math.ceil(filteredData.length / pageSize);
            
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === totalPages || totalPages === 0;
        }

        // 更新总计统计
        function updateTotalStats() {
            totalAccountsEl.textContent = filteredData.length;
            
            const totalCards = filteredData.reduce((sum, account) => sum + account.cards, 0);
            totalCardsEl.textContent = totalCards;
        }

        // 初始化图表
        function initCharts() {
            // 兑换数量分布图表
            const redeemCtx = document.getElementById('redeemChart').getContext('2d');
            const redeemData = {
                1: 0,
                2: 0,
                3: 0
            };
            
            accountData.forEach(account => {
                redeemData[account.cards]++;
            });
            
            new Chart(redeemCtx, {
                type: 'bar',
                data: {
                    labels: ['1张', '2张', '3张'],
                    datasets: [{
                        label: '账号数量',
                        data: [redeemData[1], redeemData[2], redeemData[3]],
                        backgroundColor: [
                            'rgba(69, 123, 157, 0.7)',
                            'rgba(230, 57, 70, 0.7)',
                            'rgba(72, 187, 120, 0.7)'
                        ],
                        borderColor: [
                            'rgba(69, 123, 157, 1)',
                            'rgba(230, 57, 70, 1)',
                            'rgba(72, 187, 120, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                precision: 0
                            }
                        }
                    }
                }
            });
            
            // 积分区间分布图表
            const pointsCtx = document.getElementById('pointsChart').getContext('2d');
            const pointsData = {
                '1200-1999': 0,
                '2000-2999': 0,
                '3000+': 0
            };
            
            accountData.forEach(account => {
                if (account.points < 2000) {
                    pointsData['1200-1999']++;
                } else if (account.points < 3000) {
                    pointsData['2000-2999']++;
                } else {
                    pointsData['3000+']++;
                }
            });
            
            new Chart(pointsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['1200-1999积分', '2000-2999积分', '3000+积分'],
                    datasets: [{
                        data: [pointsData['1200-1999'], pointsData['2000-2999'], pointsData['3000+']],
                        backgroundColor: [
                            'rgba(241, 113, 113, 0.7)',
                            'rgba(250, 177, 160, 0.7)',
                            'rgba(255, 209, 102, 0.7)'
                        ],
                        borderColor: [
                            'rgba(241, 113, 113, 1)',
                            'rgba(250, 177, 160, 1)',
                            'rgba(255, 209, 102, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }

        // 设置事件监听器
        function setupEventListeners() {
            // 搜索功能
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                filteredData = accountData.filter(account => 
                    account.phone.toLowerCase().includes(searchTerm) ||
                    account.status.toLowerCase().includes(searchTerm)
                );
                currentPage = 1; // 重置到第一页
                renderTable();
                updateTotalStats();
            });
            
            // 排序功能
            sortSelect.addEventListener('change', () => {
                const sortType = sortSelect.value;
                
                switch (sortType) {
                    case 'cards-desc':
                        filteredData.sort((a, b) => b.cards - a.cards);
                        break;
                    case 'cards-asc':
                        filteredData.sort((a, b) => a.cards - b.cards);
                        break;
                    case 'points-desc':
                        filteredData.sort((a, b) => b.points - a.points);
                        break;
                    case 'points-asc':
                        filteredData.sort((a, b) => a.points - b.points);
                        break;
                }
                
                renderTable();
            });
            
            // 分页按钮
            prevPageBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderTable();
                }
            });
            
            nextPageBtn.addEventListener('click', () => {
                const totalPages = Math.ceil(filteredData.length / pageSize);
                if (currentPage < totalPages) {
                    currentPage++;
                    renderTable();
                }
            });
            
            // 刷新按钮
            refreshBtn.addEventListener('click', () => {
                // 添加刷新动画
                refreshBtn.classList.add('animate-spin');
                
                // 模拟刷新延迟
                setTimeout(() => {
                    searchInput.value = '';
                    sortSelect.value = 'cards-desc';
                    filteredData = [...accountData];
                    currentPage = 1;
                    renderTable();
                    updateTotalStats();
                    refreshBtn.classList.remove('animate-spin');
                }, 800);
            });
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
